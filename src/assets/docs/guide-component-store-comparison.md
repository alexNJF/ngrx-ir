# مقایسه Component Store با Store 
هر دوی این لایبرری ها برای حل مشکلات مختلفی در مدیریت استیت در انگولار بوجود اومدن .
<br/> 
این دوتا کتابخونه از همدیگه مستقل هستن و استفاده از اونا به فاکتور های زیادی بستگی داره .
<br/>از بین همه فاکتور هایی که باید در نظر بگیریم تا بتونیم انتخاب کنیم که از کدوم یکی از این لایبرری ها استفاده کنیم موارد زیر مهم تر هستن .

- **سایز اپلیکیشن**
منظور اینه که اپلیکیشن چند تا کامپوننت داره 

- **ارتباطات داخلی اپلیکیشن**
این که تمام کامپوننت ها به همدیگه گره خوردن یا به صورت گروهی به هم ارتباط دارن 

- **عمق کامپوننت ها**
هر کامپوننتی چقدر کامپوننت تو دل خودش داره 

- **مالکیت استیت**
باید بررسی کنیم که دامین ها به خوبی از هم جدا شده اند

- **طول عمر استیت**
باید بررسی کنیم که استیت تو کل اپلیکشن باید در دسترس باشه یا این که اگه به یه قسمت دیگه اپلیکیشن رفتیم از بین میره 

- **تغییرات بیزینس**
این که چقدر از کار روشن هست خیلی به انتخاب این که چه استراتژی رو برای پیشبرد کار انتخاب میکنیم کمک میکنه

- **طول عمر اپلیکیشن**
چک کنیم که این محصول یه پروداکت واقعی هست یا یه محصول 
mvp

## مزایا و معایب 
ComponentStore و Global Store مزایای زیادی دارند که برخی از آنها در مقدمه ذکر شده است. آنها به سازماندهی حالت کمک می کنند، مهاجرت به API های جدید را آسان تر می کنند، تغییرات و عوارض جانبی را در خود محصور می کنند، اجزای ما را کوچکتر، آسان تر برای آزمایش و عملکرد بیشتر می کنند، اما همچنین پیچیدگی کد را با غیر جهت ها معرفی می کنند.

**مهمه که استیت منیجمنت ها رو درک کنیم و بدونیم معایبش چیه و چرا باید به پروژه اضافه بشه**

هر دوی 
component store 
و 
store 
 دارن به صورت 
[push-based architecture](https://medium.com/@thomasburlesonIA/push-based-architectures-with-rxjs-81b327d7c32d)
کار میکنن .
این به این معنی هست که دولوپر تا زمانی که به یک 
observable 
گوش نکنه نمیتونه دیتا رو دریافت کنه .
خوبی این روش اینه که دولوپر نگران این که چه تغییری توی کامپوننت داره اتفاق میوفته نیست <br/>
اگر کامپوننتی بخواد استیت رو تغییر بده 
فقط کافیه یه 
dispatcher 
تو حالتی که از  storeاستفاده میکنیم یا 
updater 
یا 
effect
وقتی که داریم از  compoennt store استفاده میکنیم رو صدا بزنه .

Action 
ها دومین موردی هست که بررسی میکنیم 
اونا فقط تو حالت 
Global Store 
وجود دارن 
مزایای زیادی برای استفاده از 
Action 
ها وجود داره مثل :

- وقتی یه اکشن صدا زده میشه میتونیم چندین ریدیوسر یا افکت رو باهاش کال کنیم
- مقیاس پذیری بیشتر 
- میتونیم از 
Dev tools 
به خوبی وقتی روی گلوبال استور هستیم استفاده کنیم <br/>

component store 
مواردی که در بالا گفتیم را ندارد 
اندازه 
state
که میتوانیم با 
component store 
هندل کنیم بسیار کوچک تر است 
و باالطبع مزایا متفاوتی را برایمان ایجاد میکند 

- component store 
مربوط به یک کامپونتت خاص است و وقتی کامپوننت از بین میرود استور نیز از بین میرود 

- استیت برای هر کامپوننت کاملا ایزوله است و این اجازه را به ما میدهد که برای هز 
نمونه از کامپوننت یک استور جداگانه داشته باشیم 

- برای اپلیکشن های سایز کوچک و متوسط میتوانیم استیت منیجمنت داشته باشیم 

**براساس نیاز های اپلیکیشن دولوپر میتواند گلوبال استور یا کامپوننت استور یا هر دوی آنها را انتخاب کند**


## State ownership
گلوبال استور با 
**یک**
ابجکت 
Immutable 
کار میکند که همه حالت های اپلیکیشن را درون خود جا داده <br/>

گلوبال استور از 
reducer 
های مختلفی تشکیل شده که هر کدوم یک قسمت از استیت رو تغییر میدن<br/>

اما کامپوننت استور تنهای تو حوزه تعریفش کار میکنه و میتونیم توی یه پروژه چندین کامپوننت استور داشته باشیم 


<figure>
  <img src="https://ngrx.io/generated/images/guide/component-store/state-structure.png" alt="Comparison of NgRx Store and Component Store state ownership or placement" width="100%" height="100%" />
</figure>


## File structure

ComponentStore
روی قسمت های کوچکی از استیت تمرکز میکند 
هر استیت با استفاده از یک 
updater 
و
effect 
تغییر میکند 
و چون همه این ها در درون یک فایل هستند 
زیاد شدن آنها خوانایی برنامه را کم میکند <br/>

سلکتور ها هم قسمتی از کامپوننت استور هستند 
آنها اطلاعاتی که کامپوننت نیاز دارد را در بر دارد 
اطلاعاتی که کامپوننت  نیاز دارد را اصطلاحا 
**View Model**
میگوییم 


<figure>
  <img src="https://ngrx.io/generated/images/guide/component-store/file-structure.png" alt="Comparison of NgRx Store and Component Store file structures" width="100%" height="100%" />
</figure>
